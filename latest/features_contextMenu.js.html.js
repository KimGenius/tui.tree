tui.util.defineNamespace("fedoc.content", {});
fedoc.content["features_contextMenu.js.html"] = "      <div id=\"main\" class=\"main\">\n\n\n\n    \n    <section>\n        <article>\n            <pre class=\"prettyprint source linenums\"><code>'use strict';\nvar util = require('./../util');\n\nvar API_LIST = [];\nvar TuiContextMenu = tui &amp;&amp; tui.component &amp;&amp; tui.component.ContextMenu;\nvar styleKeys = ['userSelect', 'WebkitUserSelect', 'OUserSelect', 'MozUserSelect', 'msUserSelect'];\nvar enableProp = util.testProp(styleKeys);\n\n/**\n * Set context-menu feature on tree\n * @class ContextMenu\n * @constructor\n * @param {Tree} tree - Tree\n * @param {object} options - Options\n *     @param {Array.&lt;object>} options.menuData - Context menu data\n */\nvar ContextMenu = tui.util.defineClass(/** @lends ContextMenu.prototype */{/*eslint-disable*/\n    static: {\n        /**\n         * @static\n         * @memberOf ContextMenu\n         * @returns {Array.&lt;string>} API list of ContextMenu\n         */\n        getAPIList: function() {\n            return API_LIST.slice();\n        }\n    },\n    init: function(tree, options) { /*eslint-enable*/\n        /**\n         * Tree data\n         * @type {Tree}\n         */\n        this.tree = tree;\n\n        /**\n         * Id of floating layer in tree\n         * @type {string}\n         */\n        this.flId = this.tree.rootElement.id + '-fl';\n\n        /**\n         * Info of context menu in tree\n         * @type {object}\n         */\n        this.menu = this._generateContextMenu();\n\n        /**\n         * Floating layer element\n         * @type {HTMLElement}\n         */\n        this.flElement = document.getElementById(this.flId);\n\n        /**\n         * Id of selected tree item\n         * @type {string}\n         */\n        this.selectedNodeId = null;\n\n        this._preventTextSelection();\n\n        this._attachEvent(options.menuData || {});\n    },\n\n    /**\n     * Disable context-menu feature\n     */\n    destroy: function() {\n        var treeSelector = this._getTreeSelector();\n\n        this.menu.unregister(treeSelector);\n        this.tree.off(this);\n\n        this._restoreTextSelection();\n        this._removeFloatingLayer();\n    },\n\n    /**\n     * Create floating layer for context menu\n     * @private\n     */\n    _createFloatingLayer: function() {\n        this.flElement = document.createElement('div');\n        this.flElement.id = this.flId;\n\n        document.body.appendChild(this.flElement);\n    },\n\n    /**\n     * Remove floating layer for context menu\n     * @private\n     */\n    _removeFloatingLayer: function() {\n        document.body.removeChild(this.flElement);\n        this.flElement = null;\n    },\n\n    /**\n     * Generate context menu in tree\n     * @returns {TuiContextMenu} Instance of TuiContextMenu\n     * @private\n     */\n    _generateContextMenu: function() {\n        if (!this.flElement) {\n            this._createFloatingLayer();\n        }\n\n        return new TuiContextMenu(this.flElement);\n    },\n\n    /**\n     * Prevent text selection on selected tree item\n     * @private\n     */\n    _preventTextSelection: function() {\n        if (enableProp) {\n            this.tree.rootElement.style[enableProp] = 'none';\n        }\n    },\n\n    /**\n     * Restore text selection on selected tree item\n     * @private\n     */\n    _restoreTextSelection: function() {\n        if (enableProp) {\n            this.tree.rootElement.style[enableProp] = '';\n        }\n    },\n\n    /**\n     * Get selector of tree\n     * @returns {string} Selector based on id of root tree element\n     * @private\n     */\n    _getTreeSelector: function() {\n        return '#' + this.tree.rootElement.id;\n    },\n\n    /**\n     * Attach event on tree\n     * @param {Array.&lt;object>} menuData - Context menu data\n     * @private\n     */\n    _attachEvent: function(menuData) {\n        var treeSelector = this._getTreeSelector();\n\n        this.menu.register(treeSelector, tui.util.bind(this._onSelect, this), menuData);\n        this.tree.on('contextmenu', this._onMouseClick, this);\n    },\n\n    /**\n     * Event handler on context menu\n     * @param {MouseEvent} e - Mouse event\n     * @param {string} cmd - Options value of selected context menu (\"title\"|\"command\")\n     * @private\n     */\n    _onSelect: function(e, cmd) {\n        /**\n         * @api\n         * @event Tree#selectContextMenu\n         * @param {{cmd: string, nodeId: string}} treeEvent - Tree event\n         * @example\n         * tree.on('selectContextMenu', function(treeEvent) {\n         *     var cmd = treeEvent.cmd,\n         *     var nodeId = treeEvent.nodeId;\n         *\n         *     console.log(cmd, nodeId);\n         * });\n         */\n        this.tree.fire('selectContextMenu', {\n            cmd: cmd,\n            nodeId: this.selectedNodeId\n        });\n    },\n\n    /**\n     * Event handler on tree item\n     * @param {MouseEvent} e - Mouse event\n     */\n    _onMouseClick: function(e) {\n        var target = util.getTarget(e);\n\n        this.selectedNodeId = this.tree.getNodeIdFromElement(target);\n    }\n});\n\nmodule.exports = ContextMenu;\n</code></pre>\n        </article>\n    </section>\n\n\n\n</div>\n\n"