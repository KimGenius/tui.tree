<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <script type="text/javascript" src="js/code-snippet.js"></script>
    <script type="text/javascript" src="js/tree.js"></script>
    <title>트리컴포넌트</title>
    <link rel="stylesheet" href="css/tree.css" />
</head>
<body>
<div class="treeWrap" style="position:relative; border:1px solid #eaeaea;">
    <ul id="treeRoot1" class="tree"></ul>
</div>
<div>
    <button id="addChildBtn">addChild</button>
    <button id="removeChildBtn">removeChild</button>
    <button id="sortBtn">sortBtn</button>
</div>
<div>
    <button id="enableSelectionBtn">enableSelection</button>
    <button id="disableSelectionBtn">disableSelection</button>
</div>
<script>
    var util = {
        addEventListener: function(element, eventName, handler) {
            if (element.addEventListener) {
                element.addEventListener(eventName, handler, false);
            } else {
                element.attachEvent('on' + eventName, handler);
            }
        }
    };

    var data = [
        {text: 'rootA', children: [
            {text: 'root-1A'},
            {text: 'root-1B'},
            {text: 'root-1C'},
            {text: 'root-1D'},
            {text: 'root-2A', state: 'closed', children: [
                {text:'sub_1A', children:[
                    {text:'sub_sub_1A'}
                ]},
                {text:'sub_2A'}
            ]},
            {text: 'root-2B'},
            {text: 'root-2C'},
            {text: 'root-2D'},
            {text: 'root-3A', state: 'closed', children: [
                {text:'sub3_a'},
                {text:'sub3_b'}
            ]},
            {text: 'root-3B'},
            {text: 'root-3C'},
            {text: 'root-3D'}
        ]},
        {text: 'rootB', state:'closed', children: [
            {text:'B_sub1'},
            {text:'B_sub2'},
            {text:'b'}
        ]}
    ];

    var tree = new tui.component.Tree(data, {
        nodeDefaultState: 'opened',
        rootElement: document.getElementById('treeRoot1')
    });

    var addChildBtn = document.getElementById('addChildBtn'),
        removeChildBtn = document.getElementById('removeChildBtn'),
        sortBtn = document.getElementById('sortBtn'),
        enableSelectionBtn = document.getElementById('enableSelectionBtn'),
        disableSelectionBtn = document.getElementById('disableSelectionBtn'),
        rootNodeId = tree.getRootNodeId(),
        firstChildId = tree.getChildIds(rootNodeId)[0];

    util.addEventListener(addChildBtn, 'click', function() {
        tree.add({text:'hello world'}, firstChildId);
    });

    util.addEventListener(removeChildBtn, 'click', function() {
        var lastGrandChildId = tree.getChildIds(firstChildId).slice(-1)[0];
        tree.remove(lastGrandChildId);
    });

    util.addEventListener(sortBtn, 'click', function() {
        tree.sort(function(nodeA, nodeB) {
            var aValue = nodeA.getData('text'),
                bValue = nodeB.getData('text');

            if (!bValue.localeCompare) {
                return 0;
            }
            return bValue.localeCompare(aValue);
        });
    });

    util.addEventListener(enableSelectionBtn, 'click', function() {
        tree.enableFeature('selectable');
    });

    util.addEventListener(disableSelectionBtn, 'click', function() {
        tree.disableFeature('selectable');
    });

    tree.on('select', function(nodeId) {
        alert('select! - ' + nodeId);
    });
</script>
</body>
</html>
