/*!Component-Tree v1.0.0 | NHN Entertainment*/
!function(){!function(a){"use strict";a||(a=window.ne={}),a.util||(a.util=window.ne.util={});var b=function(b,c){var d;return c||(c=b,b=null),d=c.init||function(){},b&&a.util.inherit(d,b),c.hasOwnProperty("static")&&(a.util.extend(d,c["static"]),delete c["static"]),a.util.extend(d.prototype,c),d};a.util.defineClass=b}(window.ne),function(a){"use strict";function b(a,b,c){for(var d=0,e=a.length;e>d&&b.call(c||null,a[d],d,a)!==!1;d++);}function c(a,b,c){var d;for(d in a)if(a.hasOwnProperty(d)&&b.call(c||null,a[d],d,a)===!1)break}function d(b,c,d){var e,f;if(a.util.isArray(b))for(e=0,f=b.length;f>e;e++)c.call(d||null,b[e],e,b);else a.util.forEachOwnProperties(b,c,d)}function e(b,c,d){var e=[];return a.util.forEach(b,function(){e.push(c.apply(d||null,arguments))}),e}function f(b,c,d){var e,f,g,h=0;for(a.util.isArray(b)||(e=a.util.keys(b)),f=e?e.length:b.length,g=b[e?e[h++]:h++];f>h;h++)g=c.call(d||null,g,b[e?e[h]:h]);return g}function g(a){var c;try{c=Array.prototype.slice.call(a)}catch(d){c=[],b(a,function(a){c.push(a)})}return c}a||(a=window.ne={}),a.util||(a.util=window.ne.util={});var h=function(b,c,d){var e,f,g=a.util.isArray(b)?[]:{};if(!a.util.isObject(b)||!a.util.isFunction(c))throw new Error("wrong parameter");return a.util.forEach(b,function(){c.apply(d||null,arguments)&&(e=arguments[0],f=arguments[1],a.util.isArray(b)?g.push(e):g[f]=e)},d),g};a.util.forEachOwnProperties=c,a.util.forEachArray=b,a.util.forEach=d,a.util.toArray=g,a.util.map=e,a.util.reduce=f,a.util.filter=h}(window.ne),function(a){"use strict";function b(b,e){if(arguments.length<2)return!d(b)&&!c(b);if(!i(b))return!1;if(e=l(e)?e.split("."):e,!h(e))return!1;e.unshift(b);var f=a.util.reduce(e,function(a,b){return a?a[b]:void 0});return!d(f)&&!c(f)}function c(a){return void 0===a}function d(a){return null===a}function e(a){return b(a)&&a!==!1}function f(a){return!e(a)}function g(a){var c=b(a)&&("[object Arguments]"===r.call(a)||"callee"in a);return c}function h(a){return"[object Array]"===r.call(a)}function i(a){return a===Object(a)}function j(a){return"[object Function]"===r.call(a)}function k(a){return"[object Number]"===r.call(a)}function l(a){return"[object String]"===r.call(a)}function m(a){return"[object Boolean]"===r.call(a)}function n(a){return"object"==typeof HTMLElement?a&&(a instanceof HTMLElement||!!a.nodeType):!(!a||!a.nodeType)}function o(a){return"object"==typeof HTMLElement?a&&a instanceof HTMLElement:!(!a||!a.nodeType||1!==a.nodeType)}function p(c){var d=!1;return b(c)?h(c)||g(c)?0===c.length:i(c)&&!j(c)?(a.util.forEachOwnProperties(c,function(){return d=!0,!1}),!d):!0:!0}function q(a){return!p(a)}a||(a=window.ne={}),a.util||(a.util=window.ne.util={});var r=Object.prototype.toString;a.util.isExisty=b,a.util.isUndefined=c,a.util.isNull=d,a.util.isTruthy=e,a.util.isFalsy=f,a.util.isArguments=g,a.util.isArray=Array.isArray||h,a.util.isObject=i,a.util.isFunction=j,a.util.isNumber=k,a.util.isString=l,a.util.isBoolean=m,a.util.isHTMLNode=n,a.util.isHTMLTag=o,a.util.isEmpty=p,a.util.isNotEmpty=q}(window.ne),function(a){"use strict";function b(a){var b,c,d,e,f=Object.prototype.hasOwnProperty;for(d=1,e=arguments.length;e>d;d++){b=arguments[d];for(c in b)f.call(b,c)&&(a[c]=b[c])}return a}function c(a){return a.__fe_id=a.__fe_id||++e,a.__fe_id}function d(){e=0}a||(a=window.ne={}),a.util||(a.util=window.ne.util={});var e=0,f=function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c};a.util.extend=b,a.util.stamp=c,a.util._resetLastId=d,a.util.keys=Object.keys||f}(window.ne),function(a){"use strict";function b(a,b){var c=Array.prototype.slice;if(a.bind)return a.bind.apply(a,c.call(arguments,1));var d=c.call(arguments,2);return function(){return a.apply(b,d.length?d.concat(c.call(arguments)):arguments)}}a||(a=window.ne={}),a.util||(a.util=window.ne.util={}),a.util.bind=b}(window.ne),function(a){"use strict";function b(){this._events={}}a||(a=window.ne={}),a.util||(a.util=window.ne.util={});var c={on:function(a,b,c){this._toggle(!0,a,b,c)},off:function(b,c,d){return a.util.isExisty(b)?void this._toggle(!1,b,c,d):void(this._events=null)},_toggle:function(b,c,d,e){var f=b?"_on":"_off",g=this[f];a.util.isObject(c)?a.util.forEachOwnProperties(c,function(a,b){g.call(this,b,a,d)},this):(c=c.split(" "),a.util.forEach(c,function(a){g.call(this,a,d,e)},this))},_on:function(b,c,d){var e=this._events=this._events||{},f=d&&d!==this&&a.util.stamp(d);if(f){var g=b+"_idx",h=b+"_len",i=e[g]=e[g]||{},j=a.util.stamp(c)+"_"+f;i[j]||(i[j]={fn:c,ctx:d},e[h]=(e[h]||0)+1)}else e[b]=e[b]||[],e[b].push({fn:c})},_off:function(b,c,d){var e=this._events,f=b+"_idx",g=b+"_len";if(e){var h,i,j=d&&d!==this&&a.util.stamp(d);j?(i=a.util.stamp(c)+"_"+j,h=e[f],h&&h[i]&&(h[i]=null,e[g]-=1)):(h=e[b],h&&a.util.forEach(h,function(b,d){return a.util.isExisty(b)&&b.fn===c?(h.splice(d,1),!0):void 0}))}},invoke:function(b,c){if(!this.hasListener(b))return this;var d=a.util.extend({},c,{type:b,target:this}),e=this._events;if(e){var f,g=e[b+"_idx"],h=!0;return e[b]&&(f=e[b].slice(),a.util.forEach(f,function(a){h=h&&!!a.fn.call(this,d)},this)),a.util.forEachOwnProperties(g,function(a){h=h&&!!a.fn.call(a.ctx,d)}),a.util.isBoolean(h)?h:!1}},fire:function(a,b){return this.invoke(a,b),this},hasListener:function(b){var c=this._events,d=a.util.isExisty;return d(c)&&(d(c[b])||c[b+"_len"])},getListenerLength:function(b){var c,d,e=this._events,f=b+"_len",g=0;return a.util.isExisty(e)?(c=e[b],d=e[f],g+=a.util.isExisty(c)&&a.util.isArray(c)?c.length:0,g+=a.util.isExisty(d)?d:0):0},once:function(b,c,d){function e(){c.apply(d,arguments),f.off(b,e,d)}var f=this;return a.util.isObject(b)?void a.util.forEachOwnProperties(b,function(a){this.once(a,b[a],c)},this):void this.on(b,e,d)}};b.prototype=c,b.prototype.constructor=b,b.mixin=function(b){a.util.extend(b.prototype,c)},a.util.CustomEvents=b}(window.ne),function(a){var b={NORMAL:0,EDITABLE:1},c={OPEN:["open","-"],CLOSE:["close","+"],SELECT_CLASS:"selected",SUBTREE_CLASS:"Subtree",VALUE_CLASS:"valueClass",EDITABLE_CLASS:"editableClass",TEMPLATE:{EDGE_NODE:'<li class="edge_node {{State}}"><button type="button">{{StateLabel}}</button><span id="{{NodeID}}" class="depth{{Depth}} {{ValueClass}}">{{Title}}</span><em>{{DepthLabel}}</em><ul class="{{Subtree}}" style="display:{{Display}}">{{Children}}</ul></li>',LEAP_NODE:'<li class="leap_node"><span id="{{NodeID}}" class="depth{{Depth}} {{ValueClass}}">{{Title}}</span><em>{{DepthLabel}}</em></li>'},USE_DRAG:!1,USE_HELPER:!1,HELPER_POS:{x:10,y:10}},d={addEventListener:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},removeEventListener:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},getTarget:function(a){a=a||window.event;var b=a.target||a.srcElement;return b},hasClass:function(a,b){if(!a||!b)throw new Error("#util.hasClass(element, className) 엘리먼트가 입력되지 않았습니다. \n__element"+a+",__className"+b);var c=a.className;return-1!==c.indexOf(b)?!0:!1},getElementsByClass:function(b,c){if(b.querySelectorAll)return b.querySelectorAll("."+c);var d=b.getElementsByTagName("*"),e=[];return d=a.util.toArray(d),a.util.forEach(d,function(a){var b=a.className||"";-1!==b.indexOf(c)&&e.push(a)}),e},isRightButton:function(a){var b=2===d._getButton(a);return b},testProp:function(a){for(var b=document.documentElement.style,c=0;c<a.length;c++)if(a[c]in b)return a[c];return!1},preventDefault:function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},_getButton:function(a){var b,c="0,1,3,5,7",d="2,6",e="4";return document.implementation.hasFeature("MouseEvents","2.0")?a.button:(b=a.button+"",c.indexOf(b)>-1?0:d.indexOf(b)>-1?2:e.indexOf(b)>-1?1:void 0)}};window.ne=a=a||{},a.component=a.component||{},a.component.Tree=a.util.defineClass({init:function(d,e,f){this.template=f.template||c.TEMPLATE,this.root=null,this.openSet=f.openSet||c.OPEN,this.closeSet=f.closeSet||c.CLOSE,this.onselectClass=f.selectClass||c.SELECT_CLASS,this.valueClass=f.valueClass||c.VALUE_CLASS,this.editClass=f.inputClass||c.EDITABLE_CLASS,this.depthLabels=f.depthLabels||[],this.state=b.NORMAL,this.subtreeClass=f.subtreeClass||c.SUBTREE_CLASS,this.useDrag=f.useDrag||c.USE_DRAG,this.useHelper=this.useDrag&&(f.useHelper||c.USE_HELPER),this.helperPos=f.helperPos||c.HELPER_POS,this.inputElement=this.getEditableElement(),this.model=new a.component.Tree.TreeModel(f.modelOption,this),this.model.setData(e),d?this.root=document.getElementById(d):(this.root=document.createElement("ul"),document.body.appendChild(this.root)),this._draw(this._getHtml(this.model.treeHash.root.childKeys)),this.setEvents()},getEditableElement:function(){var a=document.createElement("input");return a.className=this.editClass,a.setAttribute("type","text"),a},setEvents:function(){d.addEventListener(this.root,"click",a.util.bind(this._onClick,this)),d.addEventListener(this.inputElement,"blur",a.util.bind(this._onBlurInput,this)),d.addEventListener(this.inputElement,"keyup",a.util.bind(this._onKeyup,this)),this.useDrag&&this._addDragEvent()},_addDragEvent:function(){var b=d.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),c="onselectstart"in document;if(c)d.addEventListener(this.root,"selectstart",d.preventDefault);else{var e=document.documentElement.style;e[b]="none"}d.addEventListener(this.root,"mousedown",a.util.bind(this._onMouseDown,this))},_onKeyup:function(a){if(13===a.keyCode){var b=d.getTarget(a);this.model.rename(this.current.id,b.value),this.changeState(this.current)}},_onBlurInput:function(a){if(this.state!==b.NORMAL){var c=d.getTarget(a);this.model.rename(this.current.id,c.value),this.changeState(this.current)}},_onClick:function(b){var c=d.getTarget(b);return d.isRightButton(b)?void(this.clickTimer=null):d.hasClass(c,this.valueClass)?void(this.clickTimer?(this._onDoubleClick(b),window.clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(a.util.bind(function(){this._onSingleClick(b)},this),400)):void this._onSingleClick(b)},_onSingleClick:function(a){this.clickTimer=null;var b=d.getTarget(a),c=b.tagName.toUpperCase(),e=b.parentNode,f=d.getElementsByClass(e,this.valueClass)[0];"INPUT"!==c&&("BUTTON"===c?this.model.changeState(f.id):this.model.setBuffer(f.id))},changeState:function(a){this.state===b.EDITABLE?(this.state=b.NORMAL,this.action("restore",a)):(this.state=b.EDITABLE,this.action("convert",a))},_onDoubleClick:function(a){var b=d.getTarget(a);this.changeState(b)},_onMouseDown:function(c){if(this.state!==b.EDITABLE&&!d.isRightButton(c)){d.preventDefault(c);var e=d.getTarget(c),f=e.tagName.toUpperCase();"BUTTON"!==f&&"INPUT"!==f&&d.hasClass(e,this.valueClass)&&(this.pos=this.root.getBoundingClientRect(),this.useHelper&&this.enableHelper({x:c.clientX-this.pos.left,y:c.clientY-this.pos.top},e.innerText||e.textContent),this.move=a.util.bind(this._onMouseMove,this),this.up=a.util.bind(this._onMouseUp,this,e),d.addEventListener(document,"mousemove",this.move),d.addEventListener(document,"mouseup",this.up))}},_onMouseMove:function(a){this.useHelper&&this.setHelperLocation({x:a.clientX-this.pos.left,y:a.clientY-this.pos.top})},_onMouseUp:function(a,b){this.disableHelper();var c=d.getTarget(b),e=this.model,f=e.find(a.id),g=e.find(c.id),h=e.isDisable(g,f);e.find(c.id)&&c.id!==a.id&&!h&&e.move(a.id,f,c.id),d.removeEventListener(document,"mousemove",this.move),d.removeEventListener(document,"mouseup",this.up)},enableHelper:function(a,b){this.helperElement||(this.helperElement=document.createElement("span"),this.helperElement.style.position="absolute",this.helperElement.style.display="none",this.root.parentNode.appendChild(this.helperElement)),this.helperElement.innerHTML=b},setHelperLocation:function(a){this.helperElement.style.left=a.x+this.helperPos.x+"px",this.helperElement.style.top=a.y+this.helperPos.y+"px",this.helperElement.style.display="block"},disableHelper:function(){this.helperElement&&(this.helperElement.style.display="none")},_getHtml:function(b){var c,d,e,f,g,h,i,j,k=this.model,l=[];return a.util.forEach(b,function(b){d=k.find(b),f=d.depth,g=this[d.state+"Set"][0],h=this[d.state+"Set"][1],i=this.depthLabels[f-1]||"",j={State:g,StateLabel:h,NodeID:d.id,Depth:f,Title:d.value,ValueClass:this.valueClass,SubTree:this.subtreeClass,Display:"open"===d.state?"":"none",DepthLabel:i},a.util.isNotEmpty(d.childKeys)?(e=this.template.EDGE_NODE,j.Children=this._getHtml(d.childKeys)):e=this.template.LEAP_NODE,b=e.replace(/\{\{([^\}]+)\}\}/g,function(a,b){return j[b]||""}),l.push(b)},this),c=l.join("")},notify:function(a,b){this.action(a,b)},action:function(a,b){this._actionMap=this._actionMap||{refresh:this._refresh,rename:this._rename,toggle:this._toggleNode,select:this._select,unselect:this._unSelect,convert:this._convert,restore:this._restore},this._actionMap[a||"refresh"].call(this,b)},_changeNodeState:function(b){var c=document.getElementById(b.id);if(c){var d=c.parentNode,e=d.className;e=a.util.isEmpty(b.childKeys)?"leap_node "+this[b.state+"Set"][0]:"edge_node "+this[b.state+"Set"][0],d.className=e}},_convert:function(a){var b=a.id,c=this.model.find(b),d=c.value,e=a.parentNode;this.current&&(this.current.style.display=""),a.style.display="none",this.inputElement.value=d,this.current=a,e.insertBefore(this.inputElement,a),this.inputElement.focus()},_restore:function(a){var b=a.parentNode;this.current&&(this.current.style.display=""),this.inputElement.value="",b.removeChild(this.inputElement)},_draw:function(a,b){var c=b||this.root;c.innerHTML=a},setDepthLabels:function(a){this.depthLabels=a},_refresh:function(){var a=this.model.treeHash.root.childKeys;this._draw(this._getHtml(a))},_rename:function(a){var b=document.getElementById(a.id);b.innerHTML=a.value},_toggleNode:function(a){var b=document.getElementById(a.id),c=b.parentNode,d=c.getElementsByTagName("ul")[0],e=c.getElementsByTagName("button")[0],f=this[a.state+"Set"][0],g=this[a.state+"Set"][1],h="open"===a.state;c.className=c.className.replace(this.openSet[0],"").replace(this.closeSet[0],"")+f,d.style.display=h?"":"none",e.innerHTML=g},_select:function(b){var c=document.getElementById(b.id);a.util.isExisty(c)&&(c.className=c.className.replace(" "+this.onselectClass,"")+" "+this.onselectClass)},_unSelect:function(b){var c=document.getElementById(b.id);a.util.isExisty(c)&&d.hasClass(c,this.onselectClass)&&(c.className=c.className.replace(" "+this.onselectClass,""))}})}(ne),ne.component.Tree.TreeModel=ne.util.defineClass({init:function(a,b){this.count=0,this.tree=b,this.nodeDefaultState=a.defaultState||"close",this.buffer=null,this.depth=0,this.date=(new Date).getTime(),this.treeHash={},this.treeHash.root=this.makeNode(0,"root","root"),this.connect(b)},setData:function(a){this.treeHash.root.childKeys=this._makeTreeHash(a)},_makeTreeHash:function(a,b){var c,d=[];return this.depth=this.depth+1,ne.util.forEach(a,function(a){c=this._getId(),this.treeHash[c]=this.makeNode(this.depth,c,a.value,b),a.children&&ne.util.isNotEmpty(a.children)&&(this.treeHash[c].childKeys=this._makeTreeHash(a.children,c)),d.push(c)},this),this.depth=this.depth-1,d.sort(ne.util.bind(this.sort,this)),d},makeNode:function(a,b,c,d){return{depth:a,value:c,parentId:0===a?null:d||"root",state:this.nodeDefaultState,id:b}},_getId:function(){return this.count=this.count+1,"node_"+this.date+"_"+this.count},find:function(a){return this.treeHash[a]},remove:function(a){var b=this.invoke("remove",{id:a});b&&(this.removeKey(a),this.treeHash[a]=null,this.notify())},removeKey:function(a){var b=this.find(a);if(b){var c=this.find(b.parentId);c.childKeys=ne.util.filter(c.childKeys,function(b){return b!==a})}},move:function(a,b,c){this.removeKey(a),this.treeHash[a]=null,this.insert(b,c)},insert:function(a,b){var c=this.find(b||"root");c.childKeys||(c.childKeys=[]),c.childKeys.push(a.id),a.depth=c.depth+1,a.parentId=b,c.childKeys.sort(ne.util.bind(this.sort,this)),this.treeHash[a.id]=a,this.notify()},notify:function(a,b){this.tree&&this.tree.notify(a,b)},connect:function(a){a&&(this.tree=a)},rename:function(a,b){var c=this.invoke("rename",{id:a,value:b});if(c){var d=this.find(a);d.value=b,this.notify("rename",d)}},changeState:function(a){var b=this.find(a);b.state="open"===b.state?"close":"open",this.notify("toggle",b)},setBuffer:function(a){this.clearBuffer();var b=this.find(a);this.notify("select",b),this.fire("select",{id:a,value:b.value}),this.buffer=b},clearBuffer:function(){this.buffer&&(this.notify("unselect",this.buffer),this.buffer=null)},isDisable:function(a,b){return a.depth===b.depth?!1:a.parentId?a.id===b.parentId?!0:a.parentId===b.id?!0:this.isDisable(this.find(a.parentId),b):void 0},sort:function(a,b){var c=this.find(a),d=this.find(b);return c&&d?c.value<d.value?-1:c.value>d.value?1:0:0}}),ne.util.CustomEvents.mixin(ne.component.Tree.TreeModel)}();
//# sourceMappingURL=Component-Tree.min.map